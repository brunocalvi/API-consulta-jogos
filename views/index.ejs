<%- include("./includes/header.ejs"); -%>
<%- include("./includes/navbar.ejs"); -%>

<div class="container">
  <br>
  <h4>Lista de Games:</h4>
  <hr/>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Jogo</th>
        <th scope="col">Lan√ßamento</th>
        <th scope="col">Valor</th>
      </tr>
    </thead>
    <tbody id="games"></tbody>
  </table>
</div>
  
<%- include("./includes/footer.ejs"); -%>
 
<script>
  axios.get("http://localhost:4567/games").then(response => {

    var games = response.data.jogos;
    var list = document.getElementById("games");

    games.forEach(game => {
      var item = document.createElement("tr");
      item.innerHTML = `
                        <tr>
                          <td>${game.id}</td>
                          <td>${game.title}</td>
                          <td>${game.year}</td>
                          <td>${game.price} R$</td>
                        </tr>
                        `;

      list.appendChild(item);
    });

  }).catch(e => {
    console.log(e);

  });
</script>